<div class="notifications-widget">
  <!-- Loading State -->
  @if (isLoading) {
  <div class="widget-loading">
    <div class="animate-pulse space-y-3">
      <div class="h-4 bg-surface-variant rounded w-full"></div>
      <div class="h-4 bg-surface-variant rounded w-3/4"></div>
      <div class="h-4 bg-surface-variant rounded w-1/2"></div>
    </div>
  </div>
  }

  <!-- Notifications Content -->
  @if (!isLoading) {
  <div class="notifications-content">
    <!-- Unread Count Badge -->
    @if (unreadCount() > 0) {
    <div class="unread-badge">
      <span class="unread-count">{{ unreadCount() }}</span>
      <span class="unread-label">unread</span>
    </div>
    }
    <!-- Notifications List -->
    <div class="notifications-list">
      @for (notification of displayedNotifications(); track notification.id) {
      <div class="notification-item" [class.unread]="!notification.isRead" (click)="onNotificationClick(notification)">
        <!-- Notification Icon -->
        <div class="notification-icon" [class]="getNotificationColor(notification.type)">
          <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              [attr.d]="getNotificationIcon(notification.type)"></path>
          </svg>
        </div>
        <!-- Notification Content -->
        <div class="notification-content">
          <div class="notification-header">
            <h4 class="notification-title">{{ notification.title }}</h4>
            <span class="notification-time">{{ formatTimestamp(notification.timestamp) }}</span>
          </div>
          <p class="notification-message">{{ notification.message }}</p>
        </div>
        <!-- Unread Indicator -->
        @if (!notification.isRead) {
        <div class="unread-indicator"></div>
        }
      </div>
      }
    </div>
    <!-- Empty State -->
    @if (displayedNotifications().length === 0) {
    <div class="widget-empty">
      <svg class="h-12 w-12 text-on-surface-variant mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M15 17h5l-5 5v-5zM9 12l2 2 4-4M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <p class="text-sm text-on-surface-variant">No notifications</p>
    </div>
    }
    <!-- View All Link -->
    @if (displayedNotifications().length > 0) {
    <div class="view-all-link">
      <button (click)="onDrillThrough()" class="text-primary-600 hover:text-primary-700 font-medium text-sm">
        View All Notifications
      </button>
    </div>
    }
  </div>
  }
</div>